<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="SuPQ3DDNV0"><meta name="author" content="Minhui Zheng, mattzhengjob@gmail.com"><title>èŠèŠæŸ¯é‡ŒåŒ– Â· Minhui's blog</title><meta name="description" content="æœ€è¿‘åœ¨çœ‹æŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰ï¼Œå‘ç°ç½‘ä¸Šçš„èµ„æ–™ä¼—è¯´çº·çº­ï¼Œé±¼é¾™æ··æ‚ã€‚å†åŠ ä¸Šä¹Ÿç®—æ˜¯ä¸€é“é«˜é¢‘é¢è¯•é¢˜ï¼Œæ‰€ä»¥ä¹Ÿè¯•è¯•å®ç°äº†ä¸€ä¸‹ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸‹å¿ƒå¾—ã€‚
é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œcurrying çš„å®šä¹‰ï¼Œæ ¹æ® wiki çš„è§£é‡Šï¼ŒæŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†æ¥å—å¤šå‚æ•°å‡½æ•°è½¬æ¢æˆä¸€ä¸ªæ¥å—å•ä¸€åºåˆ—å‚æ•°çš„å‡½æ•°ï¼ˆ currying is the "><meta name="keywords" content="React,Next.js,Svelte,Web,HTML,JavaScript,CSS,Tailwind,Frontend,Angular"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="og:type" content="blog"><meta name="og:title" content="Minhui's blog"><meta name="og:description" content="I'm Minhui and I share my thoughts about reading, thinking, and web development."><meta name="og:image" content="https://zhengminhui.com/images/og-image-logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="I'm Minhui and I share my thoughts about reading, thinking, and web development."><meta name="twitter:site" content="https://zhengminhui.com/"><meta name="twitter:creator" content="@minhui"><meta name="twitter:image" content="https://zhengminhui.com/images/og-image-logo.png"><meta name="renderer" content="webkit"><link type="image/png" href="https://zhengminhui.com/images/favicon16.png" rel="icon" size="16x16"><link type="image/png" href="https://zhengminhui.com/images/favicon32.png" rel="icon" size="32x32"><link href="/css/style.css" rel="stylesheet"><link href="/css/blog_basic.css" rel="stylesheet"><link href="/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" href="/atom.xml" title="ATOM 1.0" rel="alternate"><script src="/_vercel/insights/script.js" defer=""></script><script src="https://www.googletagmanager.com/gtag/js?id=G-36J5NZ3PJY" async=""></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-36J5NZ3PJY');</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo.png" style="width:128px;"><h3 title=""><a href="/">Minhui's blog</a></h3><div class="description"><p>ğŸ–– Live long and prosper.</p></div></div></div><ul class="social-links"><li><a href="https://github.com/zhengminhui" target="_blank"><i class="fa fa-github"></i></a></li><li><a href="http://instagram.com/wanzaiwanger" target="_blank"><i class="fa fa-instagram"></i></a></li><li><a href="http://weibo.com/alandwhatever" target="_blank"><i class="fa fa-weibo"></i></a></li><li><a href="https://twitter.com/wanzaiwanger" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://zhengminhui.com/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li></ul><div class="footer"><span>Theme by CaiCai & Ben</span><div class="by_farbox"><span>Proudly published with Hexo</span></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/archives">Archive</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>èŠèŠæŸ¯é‡ŒåŒ–</a></h3></div><div class="post-content"><p>æœ€è¿‘åœ¨çœ‹æŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰ï¼Œå‘ç°ç½‘ä¸Šçš„èµ„æ–™ä¼—è¯´çº·çº­ï¼Œé±¼é¾™æ··æ‚ã€‚å†åŠ ä¸Šä¹Ÿç®—æ˜¯ä¸€é“é«˜é¢‘é¢è¯•é¢˜ï¼Œæ‰€ä»¥ä¹Ÿè¯•è¯•å®ç°äº†ä¸€ä¸‹ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸‹å¿ƒå¾—ã€‚</p>
<p>é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œcurrying çš„å®šä¹‰ï¼Œæ ¹æ® wiki çš„è§£é‡Šï¼ŒæŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†æ¥å—å¤šå‚æ•°å‡½æ•°è½¬æ¢æˆä¸€ä¸ªæ¥å—å•ä¸€åºåˆ—å‚æ•°çš„å‡½æ•°ï¼ˆ currying is the technique of conveting a function that takes multiple arguments into a sequence of functions that each take a single arguments. ï¼‰</p>
<p>æ•°å­¦è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">x</span><span class="operator">=</span> <span class="variable">f</span><span class="punctuation">(</span><span class="variable">a</span><span class="operator">,</span><span class="variable">b</span><span class="operator">,</span><span class="variable">c</span><span class="punctuation">)</span>  <span class="variable">becomse</span> <span class="operator">:</span></span><br><span class="line"></span><br><span class="line"><span class="variable">h</span> <span class="operator">=</span> <span class="variable">g</span><span class="punctuation">(</span><span class="variable">a</span><span class="punctuation">)</span><span class="operator">;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">i</span> <span class="operator">=</span> <span class="variable">h</span><span class="punctuation">(</span><span class="variable">b</span><span class="punctuation">)</span><span class="operator">;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">x</span> <span class="operator">=</span> <span class="variable">i</span><span class="punctuation">(</span><span class="variable">c</span><span class="punctuation">)</span><span class="operator">;</span></span><br><span class="line"></span><br><span class="line">æˆ–è€…å¯ä»¥é“¾å¼è°ƒç”¨ <span class="variable">x</span> <span class="operator">=</span> <span class="variable">g</span><span class="punctuation">(</span><span class="variable">a</span><span class="punctuation">)</span><span class="punctuation">(</span><span class="variable">b</span><span class="punctuation">)</span><span class="punctuation">(</span><span class="variable">c</span><span class="punctuation">)</span><span class="operator">.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ ¹æ®å®šä¹‰æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œcurrying éœ€è¦å‡½æ•°æœ‰ä¸€ä¸ªå›ºå®šæ•°é‡å…¥å‚ï¼Œè¿™æ ·æ‰èƒ½å°†å¯¹åº”çš„å‡½æ•°æ­£ç¡®çš„â€œæŸ¯é‡Œâ€ã€‚è‡³äºéå›ºå®šçš„å…¥å‚ï¼Œæˆ‘ä»¬åé¢å†è®²ã€‚</p>
<p>å…ˆçœ‹ä¸€ä¸ªç®€å•çš„å®ç°ã€‚</p>
<p>æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªåŸºæœ¬çš„ sum æ–¹æ³•ï¼Œæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œè¿”å›åŠ å’Œã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å†æ¥å®ç°æŸ¯é‡Œæ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">curried</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// fn.length è¿”å›éœ€è¦ç§‘é‡ŒåŒ–çš„æ–¹æ³•çš„ arguments çš„é•¿åº¦,</span></span><br><span class="line">    <span class="comment">// å¦‚æœä¸åˆ°è¿™ä¸ªé•¿åº¦ï¼Œåˆ™è¯´æ˜éœ€è¦ç»§ç»­æ¥å—å‚æ•°ï¼Œ</span></span><br><span class="line">    <span class="keyword">if</span> (args.<span class="property">length</span> &gt;= fn.<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> curried.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args.<span class="title function_">concat</span>(args2));</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ç°æ¯”è¾ƒç›´è§‚ï¼Œå¦‚æœé•¿åº¦ä¸åŠåŸå§‹å‡½æ•°è§„å®šçš„å…¥å‚ï¼Œåˆ™ç»§ç»­ concatï¼Œç›´åˆ°æ»¡è¶³é•¿åº¦ï¼Œè°ƒç”¨ apply ç«‹åˆ»æ‰§è¡Œã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> curried = <span class="title function_">curry</span>(sum);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;curried sum result&quot;</span>, <span class="title function_">curried</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;curried sum result&quot;</span>, <span class="title function_">curried</span>(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;curried sum result&quot;</span>, <span class="title function_">curried</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>));</span><br></pre></td></tr></table></figure>

<p>æœ‰ä¸‰ä¸ªå°ç‚¹å€¼å¾—æ³¨æ„ã€‚</p>
<p>ç¬¬ä¸€æ˜¯ arguments å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ª array like objectï¼Œ å®ƒæ‹¥æœ‰ length å±æ€§ï¼Œä½†æ˜¯æƒ³ç›´æ¥è°ƒç”¨æ•°ç»„çš„æ–¹æ³•æ˜¯ä¸è¡Œçš„ã€‚</p>
<p>è®°å½•ä¸€ä¸‹èŒ´å­—çš„å››ç§å†™æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> args = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> args = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> args = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">arguments</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> args = [â€¦ <span class="variable language_">arguments</span>]</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒä¸ªæ˜¯ä¸Šé¢ä»£ç é‡Œçš„ç¬¬ 3 è¡Œï¼Œ fn.lengthï¼Œ è¿”å›çš„æ˜¯åŸå§‹å‡½æ•°çš„å…¥å‚é•¿åº¦ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œè°ƒç”¨æ—¶ï¼Œä¸ä»…å¯ä»¥ <code>curried(1)(2)(3)</code>, è¿˜èƒ½<code>curried(1, 2)(3)</code>ã€‚ åè€…ç§°ä½œ partial functionã€‚æœ‰æœºä¼šå†èŠã€‚</p>
<p>å½“ç„¶å¸‚é¢ä¸Šä¼šæœ‰å„ç§å®ç°æ–¹å¼ï¼Œé…åˆ es5ï¼Œes6ï¼Œæ£€æŸ¥å„ç§è¾¹é™…æ¡ä»¶ã€‚æŸ¥ä¸€æŸ¥ä¼šæœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸åšèµ˜è¿°ã€‚</p>
<p>æ¥ä¸‹æ¥èŠèŠæŸ¯é‡ŒåŒ–çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>æŸ¯é‡ŒåŒ–æä¾›äº†ä¸€ç§å°è£…æ–¹å¼ï¼Œå‡å°‘ä»£ç å†—ä½™ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<p>æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯ log å‡½æ•°ï¼Œæ¯”å¦‚ log å¯ä»¥æ¥å— time ï¼Œlevelï¼Œ message ä¸‰ä¸ªå‚æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">log</span>(<span class="params">date, importance, message</span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">`[<span class="subst">$&#123;date.getHours()&#125;</span>:<span class="subst">$&#123;date.getMinutes()&#125;</span>] [<span class="subst">$&#123;importance&#125;</span>] <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘æƒ³åœ¨æ­¤åŸºç¡€ä¸Šå°è£…ï¼ŒlogNow ï¼Œæˆ‘å¯ä»¥è¿™ä¹ˆåš</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> curriedLog = _.<span class="title function_">curry</span>(log);</span><br><span class="line"></span><br><span class="line"><span class="comment">// logNow will be the partial of log with fixed first argument</span></span><br><span class="line"><span class="keyword">let</span> logNow = <span class="title function_">curriedLog</span>(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// use it</span></span><br><span class="line"><span class="title function_">logNow</span>(<span class="string">&quot;INFO&quot;</span>, <span class="string">&quot;message&quot;</span>); <span class="comment">// [HH:mm] INFO message</span></span><br></pre></td></tr></table></figure>

<p>æˆ–è€…æˆ‘ä»¬æƒ³å†è¿›ä¸€æ­¥ï¼Œæƒ³å°è£…ä¸€ä¸ª debugNow å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> debugNow = <span class="title function_">logNow</span>(<span class="string">&quot;DEBUG&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">debugNow</span>(<span class="string">&quot;message&quot;</span>); <span class="comment">// [HH:mm] DEBUG message</span></span><br></pre></td></tr></table></figure>

<p>è°ˆå®Œäº†åº”ç”¨åœºæ™¯ï¼Œå†è¯´è¯´æ•ˆç‡ã€‚</p>
<p>æ˜¯çš„ï¼ŒæŸ¯é‡ŒåŒ–å¾ˆæ…¢ï¼Œæ€§èƒ½æŸè€—å¾ˆå¤§ã€‚ä¸ºä»€ä¹ˆï¼Ÿå¤§é‡çš„åµŒå¥—ä½œç”¨åŸŸå’Œé—­åŒ…ï¼Œå¸¦æ¥äº†ä¸å°çš„å†…å­˜å ç”¨ã€‚è‡³äºç½‘ä¸Šè¯´çš„ï¼Œ fn.apply å’Œ fn.call æ¯”ç›´æ¥è°ƒç”¨ fn æ…¢ï¼ˆçœ‹ä¸Šå»æ˜¯çš„ï¼‰ï¼Œ è€ç‰ˆæœ¬æµè§ˆå™¨åœ¨ arguments.length çš„å®ç°ç›¸å½“æ…¢ï¼ˆä¸çŸ¥é“ï¼‰ï¼Œå­˜å– arguments å¯¹è±¡æ¯”å­˜å–å‘½åå‚æ•°è¦æ…¢ä¸€äº›ï¼ˆä¸ç¡®å®šï¼‰ï¼Œè¿™äº›åŸå› ï¼Œçœ‹ä¸Šå»å¯èƒ½ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ä¸»è¦åŸå› è¿˜æ˜¯å†…å­˜æ–¹é¢ã€‚æ˜¨æ™šåœ¨çœ‹ã€Šå‡½æ•°å¼ç¼–ç¨‹ã€‹é‡Œé¢ï¼Œæœ‰åšè¿‡æŸ¯é‡ŒåŒ–å’Œæ™®é€šå‡½æ•°çš„æ€§èƒ½å¯¹æ¯”ï¼Œæœ‰ç©ºé™„ä¸Šç»“æœå’Œé¡µç ã€‚</p>
<p>æœ€åè¯´è¯´å‰é¢é—ç•™çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­å¸¸è§çš„ä¸€é“é¢˜ï¼Œé¢˜ç›®å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">sum</span>(<span class="number">1</span>)();</span><br><span class="line"><span class="title function_">sum</span>(<span class="number">1</span>)(<span class="number">2</span>)();</span><br><span class="line"><span class="title function_">sum</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)();</span><br></pre></td></tr></table></figure>

<p>é¢˜ç›®å¤§è‡´å¦‚æ­¤ï¼ŒåŸºæœ¬å°±æ˜¯éå›ºå®šçš„å…¥å‚ï¼Œæ±‚åŠ å’Œã€‚å…³äºè¿™ç‚¹ï¼Œæˆ‘æƒ³æƒ³è¯´è¯´æˆ‘çš„çœ‹æ³•ã€‚</p>
<p>æˆ‘è®¤ä¸ºè¿™é“é¢˜è¦å¾€æŸ¯é‡ŒåŒ–ä¸Šé ï¼Œæœ‰ç‚¹å‹‰å¼ºã€‚æ”¾åœ¨ closure é—¨ç±»é‡Œï¼Œæ¯”è¾ƒåˆé€‚ã€‚</p>
<p>é™„ä¸Šæˆ‘å†™çš„ä¸€ä¸ªé¢˜è§£ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œä¸é™å®šå…¥å‚æ•°é‡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">apply</span>(<span class="variable language_">arguments</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">p, c</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> p + c;</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum&quot;</span>, <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">curry2</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">curried</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// ç´¯è®¡ä¿å­˜çš„ arguments</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args2</span>) &#123;</span><br><span class="line">      <span class="comment">// çœŸæ­£æ¥å—çš„ arguments</span></span><br><span class="line">      <span class="keyword">if</span> (!args2.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="comment">// æœ€åä¼ çš„ç©ºï¼Œå‘ŠçŸ¥è¿”å›ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå…¥å‚ä¸ä¸ºç©ºï¼Œ åˆ™ç»§ç»­ concatï¼Œè¿”å› curried æ–¹æ³•ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">return</span> curried.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args.<span class="title function_">concat</span>(args2));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> curried = <span class="title function_">curry2</span>(sum);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;curried sum result&quot;</span>, <span class="title function_">curried</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>)());</span><br></pre></td></tr></table></figure>

<p>é™¤äº†ä¸Šè¿°å¯¹ arguments åå¤æ‘©æ“¦ï¼Œæˆ‘è§‰å¾—åŸºäº closure çš„å®ç°æ›´åŠ ç›´æ¥ã€‚ä¸»è¦æ€æƒ³å°±ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯é—­åŒ…çš„åŸºæœ¬æ¦‚å¿µï¼Œå†…å±‚å‡½æ•°å¯ä»¥è®¿é—®å¤–å±‚ä½œç”¨åŸŸã€‚</p>
<p>å®ç°å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> s = n;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params">m</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!m) <span class="keyword">return</span> s;</span><br><span class="line">    s += m;</span><br><span class="line">    <span class="keyword">return</span> fun;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>)()); <span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ±‚å’Œæ–¹å¼ï¼Œé™¤äº†æœ€åä¼ å…¥ä¸€ä¸ªç©ºä»¥å¤–ï¼Œè¿˜æœ‰å„ç§å˜ä½“ï¼Œæ¯”å¦‚ç»™ sum å¯¹è±¡åŠ ä¸€ä¸ª toString æ–¹æ³•ï¼Œé€šè¿‡<code>+sum(1)</code> æ¥è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼ˆtype coercionï¼‰ï¼Œé‚£ç§å¤ª hack äº†ï¼Œæˆ‘è§‰å¾— duck ä¸å¿…ã€‚</p>
<p>æœ€åï¼ŒCurry å‘½åä¸æ˜¯å› ä¸ºå’–å–±ï¼Œè€Œæ˜¯å› ä¸º Haskell Curryã€‚</p>
<p>è°¢è°¢é˜…è¯»ã€‚</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-calendar"></i><span class="date">2021-03-24</span><i class="fa fa-tag"></i><a href="/categories/web/" title="web" class="tag">web </a><a href="/tags/javascript/" title="javascript" class="tag">javascript </a><a href="/tags/curry/" title="curry" class="tag">curry </a><a href="/tags/closure/" title="closure" class="tag">closure </a></div></div></div></div><div class="share"><div class="weibo"> <a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"> <a target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?url=https://zhengminhui.com/2021/curry-in-javascript/&amp;text=èŠèŠæŸ¯é‡ŒåŒ–%20Â·%20Minhui's blog" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2021/282aa8cf/" title="èŠèŠäº‹ä»¶å¾ªç¯" class="btn">prev post</a></li><li class="next pagbuttons"><a role="navigation" href="/2020/3052b9d9/" title="ä¸‰åè€Œç«‹" class="btn">next post</a></li></ul></div></div></div></div></div></body></html>